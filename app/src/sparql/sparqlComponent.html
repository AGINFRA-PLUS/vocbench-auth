<div class="vbox">
    
    <!--Tabs navigation-->
    <ul class="nav nav-tabs" (click)="$event.preventDefault()">
        <li *ngFor="let t of tabs" [ngClass]="{active : t.active}">
            <a href (click)="selectTab(t)">
                Query
                <span *ngIf=(t.removable) class="glyphicon glyphicon-remove-circle"
                    (click)="closeTab(t)"
                    onmouseover="this.className='glyphicon glyphicon-remove-sign'; this.style.cursor='pointer'"
                    onmouseout="this.className='glyphicon glyphicon-remove-circle'; this.style.cursor='default'">
                </span>
            </a>
        </li>
        <li [ngClass]="{disabled : tabs.length==10}">
            <a href (click)="addTab()" onmouseover="this.style.color='#555'" onmouseout="this.style.color='#337ab7'">
                <i class="glyphicon glyphicon-plus"></i>
            </a>
        </li>
    </ul>
    <!--Tabs content-->
    <div class="tab-content">
        <div *ngFor="let t of tabs" [ngClass]="{vbox : t.active}">
            <div *ngIf="t.active" class="vbox">
                <!--Query mode selection-->
                <div style="margin: 5px 0;">
                    <label>Query mode:</label>
                    <select name="queryModeSelect" [(ngModel)]="t.queryMode">
                        <option value="query">SPARQL 1.1 Query</option>
                        <option value="update">SPARQL 1.1 Update</option>
                    </select>
                </div>
                
                <codemirror [query]="t.query" (querychange)="t.query=$event"></codemirror>
                
                <!--Commands (submit, clear, inferred)-->
                <div style="margin: 5px 0;">
                    <button class="btn btn-sm btn-primary" type="button" (click)="doQuery(t)" [disabled]="t.queryInProgress">Submit query</button>
                    <button class="btn btn-sm btn-info" type="button" (click)="clear(t)">Clear</button>
                    <label style="margin-left: 5px;">
                        Include inferred statement:
                        <input #inferredcb type="checkbox" (change)="t.inferred=inferredcb.checked">
                    </label>
                </div>
                
                <!--Query result-->
                <div *ngIf="t.queryResult" class="vbox">
                    <div>
                        <label>Result of the query </label>
                        <p *ngIf="t.queryTime != null" style="display: inline; margin-left: 5px;">(Done in {{t.queryTime}})</p>
                    </div>
                    <div class="scrollableContainer">
                        <table class="table table-striped table-condensed table-hoverable" style="flex: 1">
                            <thead>
                                <tr>
                                    <th *ngFor="let h of t.headers">{{h}}</th>
                                </tr>
                            </thead>
                            <tbody style="overflow: auto;">
                                <tr *ngFor="let bindings of t.queryResult">
                                    <td *ngFor="let h of t.headers">{{bindings[h].value}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    

</div>