<!--<div class="vbox">
    
    <div style="margin: 5px 0;">
        <label>Query language</label>
        <select name="queryModeSelect" [(ngModel)]="queryMode">
            <option value="query">SPARQL 1.1 Query</option>
            <option value="update">SPARQL 1.1 Update</option>
        </select>
    </div>

    <textarea [(ngModel)]="query" style="resize: vertical; min-height: 150px; width:100%;"></textarea>

    <div style="margin: 5px 0;">
        <button class="btn btn-sm btn-primary" type="button" (click)="doQuery()" [disabled]="queryInProgress">Submit query</button>
        <button class="btn btn-sm btn-info" type="button" (click)="clear()">Clear</button>
        <label style="margin-left: 5px;">
            Include inferred statement:
            <input #inferredcb type="checkbox" (change)="inferred = inferredcb.checked">
        </label>
    </div>


    <div *ngIf="queryResult" class="vbox" style="min-height: 200px;">
        <div>
            <label>Result of the query </label>
            <p *ngIf="queryTime != null" style="display: inline; margin-left: 5px;">(Done in {{queryTime}})</p>
        </div>
        <div class="scrollableContainer">
            <table class="table table-striped table-condensed">
                <thead>
                    <tr>
                        <th *ngFor="#h of headers">{{h}}</th>
                    </tr>
                </thead>
                <tbody style="overflow: auto;">
                    <tr *ngFor="#bindings of queryResult">
                        <td *ngFor="#h of headers">{{bindings[h].value}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>-->
<div class="vbox">

    <alert type="warning" dismissible="true">
        Currently, due to problems with ng2-bootstrap (the module that provides the tab feature),
        to show the results of a query once it is submitted, you need to change something to some element
        (e.g. you can temporarly check the "include inferred statement" checkbox, 
        or type something in the textarea, or change tab)
    </alert>

    <tabset class="vbox">
        <tab (select)="addTab()" active="false" [disabled]="tabs.length==10" >
            <template tab-heading>
                <i class="glyphicon glyphicon-plus"></i>
            </template>
        </tab>
        <tab *ngFor="#t of tabs" heading="Query" [active]="t.active"
            (select)="t.active=true" (deselect)="t.active=false" removable="true">
            
            <div class="vbox">
                <!--Query mode selection-->
                <div style="margin: 5px 0;">
                    <label>Query mode:</label>
                    <select name="queryModeSelect" [(ngModel)]="t.queryMode">
                        <option value="query">SPARQL 1.1 Query</option>
                        <option value="update">SPARQL 1.1 Update</option>
                    </select>
                </div>
                
                <!--Query textarea-->
                <textarea [(ngModel)]="t.query" style="resize: vertical; min-height: 150px; width:100%;"></textarea>

                <!--Commands (submit, clear, inferred)-->
                <div style="margin: 5px 0;">
                    <button class="btn btn-sm btn-primary" type="button" (click)="doQuery(t)" [disabled]="t.queryInProgress">Submit query</button>
                    <button class="btn btn-sm btn-info" type="button" (click)="clear(t)">Clear</button>
                    <label style="margin-left: 5px;">
                        Include inferred statement:
                        <input #inferredcb type="checkbox" (change)="t.inferred=inferredcb.checked">
                    </label>
                </div>

                <!--Query result-->
                <div *ngIf="t.queryResult" class="vbox">
                    <div>
                        <label>Result of the query </label>
                        <p *ngIf="t.queryTime != null" style="display: inline; margin-left: 5px;">(Done in {{t.queryTime}})</p>
                    </div>
                    <div class="scrollableContainer">
                        <table class="table table-striped table-condensed">
                            <thead>
                                <tr>
                                    <th *ngFor="#h of t.headers">{{h}}</th>
                                </tr>
                            </thead>
                            <tbody style="overflow: auto;">
                                <tr *ngFor="#bindings of t.queryResult">
                                    <td *ngFor="#h of t.headers">{{bindings[h].value}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
            </div>
            
        </tab>
    </tabset>

</div>